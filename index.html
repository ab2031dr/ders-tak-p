<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Ders & Mola Takip</title>
  <link rel="stylesheet" href="style.css" />
  <!-- Grafikler -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
  <header class="topbar">
    <button id="backBtn" class="back hidden" aria-label="Geri">â†</button>
    <h1 id="titleText">Ders & Mola Takip</h1>
    <div class="right">
      <div class="clock" id="liveClock">--:--:--</div>
      <div id="userBadge" class="user-badge hidden">
        <span id="userNameLabel"></span>
        <button id="logoutBtn" class="btn small">Ã‡Ä±kÄ±ÅŸ</button>
      </div>
    </div>
  </header>

  <main class="app">
    <!-- =============== AUTH (Firebase) =============== -->
    <section id="viewAuth" class="view active">
      <section class="card auth-card">
        <div class="seg auth-tabs">
          <button id="tabLogin" class="seg-btn active">GiriÅŸ</button>
          <button id="tabRegister" class="seg-btn">KayÄ±t Ol</button>
        </div>

        <!-- LOGIN -->
        <div id="loginPane" class="auth-pane">
          <div class="row">
            <label for="loginUser">E-posta</label>
            <input type="email" id="loginUser" autocomplete="username" />
          </div>
          <div class="row">
            <label for="loginPass">Åifre</label>
            <input type="password" id="loginPass" autocomplete="current-password" />
          </div>
          <button id="loginBtn" class="btn start full">GiriÅŸ Yap</button>
          <p class="muted small">HesabÄ±nla giriÅŸ yap; verilerin bulutta senkronlanÄ±r.</p>
        </div>

        <!-- REGISTER -->
        <div id="registerPane" class="auth-pane hidden">
          <div class="row">
            <label for="regUser">E-posta</label>
            <input type="email" id="regUser" autocomplete="username" />
          </div>
          <div class="row">
            <label for="regPass">Åifre</label>
            <input type="password" id="regPass" autocomplete="new-password" />
          </div>
          <div class="row">
            <label for="regPass2">Åifre (tekrar)</label>
            <input type="password" id="regPass2" autocomplete="new-password" />
          </div>
          <button id="registerBtn" class="btn start full">KayÄ±t Ol</button>
          <p class="muted small">Åifren Firebase Authentication ile gÃ¼venle saklanÄ±r.</p>
        </div>
      </section>
    </section>

    <!-- =============== ANA MENÃœ =============== -->
    <section id="viewHome" class="view">
      <div class="home-grid">
        <button class="round-card" id="navPomodoro" aria-label="Pomodoro">
          <div class="round-icon gradient-green">â±ï¸</div>
          <div class="round-title">Pomodoro</div>
        </button>

        <button class="round-card" id="navStats" aria-label="Ä°statistikler">
          <div class="round-icon gradient-blue">ğŸ“Š</div>
          <div class="round-title">Ä°statistikler</div>
        </button>

        <button class="round-card" id="navQuickAdd" aria-label="Ekle">
          <div class="round-icon gradient-purple">â•</div>
          <div class="round-title">Ekle</div>
        </button>

        <button class="round-card" id="navRanking" aria-label="SÄ±ralama">
          <div class="round-icon gradient-orange">ğŸ†</div>
          <div class="round-title">SÄ±ralama</div>
        </button>

        <button class="round-card" id="navSettings" aria-label="Ayarlar">
          <div class="round-icon gradient-gray">âš™ï¸</div>
          <div class="round-title">Ayarlar</div>
        </button>
      </div>
    </section>

    <!-- =============== POMODORO =============== -->
    <section id="viewPomodoro" class="view">
      <section class="settings card">
        <div class="row">
          <label for="studyMin">Ders SÃ¼resi:</label>
          <input type="number" id="studyMin" value="50" min="0" /> dk
          <input type="number" id="studySec" value="0" min="0" max="59" /> sn
        </div>
        <div class="row">
          <label for="breakMin">KÄ±sa Mola:</label>
          <input type="number" id="breakMin" value="10" min="0" /> dk
          <input type="number" id="breakSec" value="0" min="0" max="59" /> sn
        </div>
        <div class="row">
          <label for="longBreakMin">Uzun Mola:</label>
          <input type="number" id="longBreakMin" value="60" min="0" /> dk
          <input type="number" id="longBreakSec" value="0" min="0" max="59" /> sn
        </div>
        <div class="row">
          <label for="roundsCount">Her Set Ä°Ã§in Tur:</label>
          <input type="number" id="roundsCount" value="4" min="1" />
        </div>
        <div class="row">
          <label for="setsCount">Set SayÄ±sÄ±:</label>
          <input type="number" id="setsCount" value="3" min="1" />
        </div>
        <div class="row">
          <label class="sound-toggle"><input type="checkbox" id="soundToggle" checked /> Ses (tik-tak)</label>
        </div>
        <div class="row">
          <label class="sound-toggle"><input type="checkbox" id="alarmToggle" checked /> BitiÅŸte Zil</label>
        </div>
        <button id="saveSettings">Kaydet</button>
      </section>

      <section class="timer card">
        <h2 id="status">HazÄ±r</h2>
        <div class="roundInfo">Set: <span id="setLabel">0 / 3</span> â€” Tur: <span id="roundLabel">0 / 4</span></div>

        <!-- GERÃ‡EKÃ‡Ä° KUM SAATÄ° (Canvas) -->
        <div class="hourglass" id="hourglass" aria-hidden="true">
          <canvas id="hgCanvas" width="170" height="240"></canvas>
        </div>

        <div id="timeDisplay" class="time">00:00</div>
        <div class="controls">
          <button id="startBtn" class="btn start">BaÅŸla</button>
          <button id="pauseBtn" class="btn pause">Duraklat</button>
          <button id="resetBtn" class="btn reset">SÄ±fÄ±rla</button>
          <button id="stopSoundBtn" class="btn mute hidden">Sesi Durdur</button>
          <button id="skipBreakBtn" class="btn skip hidden">MolayÄ± Atla</button>
        </div>
      </section>
    </section>

    <!-- =============== Ä°STATÄ°STÄ°KLER =============== -->
    <section id="viewStats" class="view">
      <section class="stats card">
        <h3>Ä°statistikler</h3>

        <div class="stats-controls">
          <div class="seg">
            <button class="seg-btn active" data-metric="time" id="metricTime">SÃ¼re</button>
            <button class="seg-btn" data-metric="questions" id="metricQuestions">Soru</button>
          </div>
          <div class="seg">
            <button class="seg-btn active" data-range="week" id="rangeWeek">HaftalÄ±k</button>
            <button class="seg-btn" data-range="month" id="rangeMonth">AylÄ±k</button>
            <button class="seg-btn" data-range="year" id="rangeYear">YÄ±llÄ±k</button>
          </div>
        </div>

        <canvas id="statsChart" height="200"></canvas>

        <div class="list-wrap">
          <h4 id="listTitle">HaftalÄ±k Ã‡alÄ±ÅŸma</h4>
          <ul id="statsList" class="stats-list"></ul>
        </div>

        <div class="totals old-totals">
          <p>BugÃ¼n Ã‡alÄ±ÅŸma: <span id="todayTotal">0</span> dk</p>
          <p>HaftalÄ±k Ã‡alÄ±ÅŸma: <span id="weekTotal">0</span> dk</p>
        </div>

        <!-- Soru kaydÄ± + dÃ¼zenleme -->
        <div class="question-form" id="questionForm">
          <h4>Soru KaydÄ±</h4>
          <div class="row">
            <label for="qDate">Tarih:</label>
            <input type="date" id="qDate" />
          </div>
          <div class="row">
            <label for="qSubject">Ders:</label>
            <select id="qSubject"></select>
          </div>
          <div class="row">
            <label for="qCount">Soru:</label>
            <input type="number" id="qCount" min="0" placeholder="Ã¶rn. 50" />
          </div>
          <button id="qSaveBtn" class="btn start">Kaydet</button>

          <div class="q-list-wrap">
            <h4>SeÃ§ilen Tarihteki Soru KayÄ±tlarÄ±</h4>
            <ul id="qEntryList" class="stats-list compact"></ul>
          </div>
        </div>
      </section>
    </section>

    <!-- =============== SIRALAMA (placeholder) =============== -->
    <section id="viewSort" class="view">
      <section class="card"><h3>ğŸ† SÄ±ralama</h3><p>YakÄ±ndaâ€¦</p></section>
    </section>

    <!-- =============== AYARLAR / TEMA =============== -->
    <section id="viewPrefs" class="view">
      <section class="card">
        <h3>âš™ï¸ Ayarlar & Tema</h3>
        <div class="row">
          <label for="themeSelect">Tema:</label>
          <select id="themeSelect">
            <option value="dark">KaranlÄ±k</option>
            <option value="light">AydÄ±nlÄ±k</option>
            <option value="forest">Orman</option>
            <option value="ocean">Okyanus</option>
            <option value="sunset">GÃ¼nbatÄ±mÄ±</option>
            <option value="neon">Neon</option>
            <option value="custom">Ã–zel Arkaplan</option>
          </select>
          <button id="applyThemeBtn" class="btn start">Uygula</button>
        </div>
        <div class="row" id="customBgRow" style="display:none">
          <label for="bgUpload">Arkaplan resmi (JPG/PNG):</label>
          <input type="file" id="bgUpload" accept="image/*" />
          <small class="muted">Resim local olarak saklanÄ±r (PDF desteklenmez).</small>
        </div>
        <div class="row">
          <img id="themePreview" alt="Ã–nizleme" style="max-width:260px;border-radius:12px;display:none;border:1px solid rgba(255,255,255,.08)"/>
        </div>
        <p class="muted small">
          Not: Ä°stersen <code>themes/</code> klasÃ¶rÃ¼ oluÅŸturup gÃ¶rsellerini
          <code>forest.jpg</code>, <code>ocean.jpg</code>, <code>sunset.jpg</code> gibi isimlerle koyabilirsin.
          Script bu isimleri otomatik kullanacak.
        </p>
      </section>
    </section>
  </main>

  <div id="toastContainer" class="toast-container" aria-live="polite" aria-atomic="true"></div>
  <footer class="footnote">PREPARED BY RAKIB â€“ Ä°YÄ° Ã‡ALIÅMALAR</footer>

  <!-- Firebase (compat / global) -->
  <script src="https://www.gstatic.com/firebasejs/10.12.4/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.4/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.4/firebase-firestore-compat.js"></script>
  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyCSfypLfBdl1Nx4-Bf1NATidgdJ5vFKPOA",
      authDomain: "ders-uygulamasi-e6faf.firebaseapp.com",
      projectId: "ders-uygulamasi-e6faf",
      storageBucket: "ders-uygulamasi-e6faf.firebasestorage.app",
      messagingSenderId: "314675748985",
      appId: "1:314675748985:web:17cf2013986cd7573bf4a8",
      measurementId: "G-CDVM65CF70"
    };
    firebase.initializeApp(firebaseConfig);
  </script>

  <!-- Bulut katmanÄ± ve uygulama -->
  <script src="firebase-init.js"></script>
  <script defer src="script.js"></script>
</body>
</html>

